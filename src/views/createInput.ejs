<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Product</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- Trong file EJS -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">Quản Lý</a>
          </div>
          <ul class="nav navbar-nav">
            <li></li><a href="/user-page">Doanh thu</a></li>
            <li class="active"><a href="/user/nhap-kho">Danh sách sản phẩm</a></li>
          </ul>
        </div>
    </nav>
    <div class="container mt-5">
      <h1 class="text-center">Chỉnh Sửa Sản Phẩm</h1>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>ID PRODUCT</th>
            <th>Name</th>
            <th>Price</th>
            <th>Quantily</th>
            <th>Type_product</th>
            <th>Sale</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <form id="editForm" onsubmit="submitForm(event)">
              <td><input id="id" name="id" class="form-control" type="text" value="<%= product.id %>" readonly></td>
              <td><input id="id_product" name="id_product" class="form-control" type="text"
                  value="<%= product.id_product %>"></td>
              <td><input id="name" name="name" class="form-control" type="text" value="<%= product.name %>"></td>
              <td><input id="price" name="price" class="form-control" type="text" value="<%= product.price %>"></td>
              <td><input id="quanlity" name="quanlity" class="form-control" type="text" value="<%= product.quantily %>">
              </td>
              <td><input id="type_product" name="type_product" class="form-control" type="text"
                  value="<%= product.type_product %>"></td>
              <td><input id="sale" name="sale" class="form-control" type="text" value="<%= product.sale %>"></td>
              <td>
                <button class="btn btn-primary" type="submit">Sửa</button>
              </td>
            </form>
          </tr>
        </tbody>
      </table>
      <a href="/product" class="btn btn-primary">Quay Lại</a>
    </div>
      <script>
        function submitForm(event) {
        event.preventDefault();

        var formData = {
            id: document.getElementById('id').value,
            id_product: document.getElementById('id_product').value,
            name: document.getElementById('name').value,
            price: document.getElementById('price').value,
            quantily: document.getElementById('quanlity').value,
            type_product: document.getElementById('type_product').value,
            sale: document.getElementById('sale').value
        };

        axios.put('/product/edit-product', formData)
            .then(function (response) {
                alert(response.data.errMessage);
                
                // Xử lý kết quả từ server (nếu cần)
            })
            .catch(function (error) {
                alert(response.data.errCode);
            });
    }
      </script>
</body>
</html>